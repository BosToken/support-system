var FullScreenButton=function(b){var c=$.summernote.ui;var a=c.button({className:"note-fullscreen2",contents:'<i class="note-icon-arrows-alt"/>',tooltip:"Full Screen",click:function(){b.invoke("fullscreen.toggle");var d=b.layoutInfo.editor;if(d.hasClass("fullscreen")){$("body").addClass("s-note-fs");c.toggleBtnActive(b.layoutInfo.toolbar.find(".note-fullscreen2"),true)}else{$("body").removeClass("s-note-fs");c.toggleBtnActive(b.layoutInfo.toolbar.find(".note-fullscreen2"),false)}b.invoke("focus")}});return a.render()};function set_summernote_init(){try{var b=[["undoredo",["style","magic","undo","redo"]],["style",["bold","italic","underline","clear"]],["insert",["table","link","hr"]],["fontsize",["fontname","fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["codeview",["codeview","fullscreen2"]]];var a=[["undoredo",["style","undo","redo"]],["style",["bold","italic","underline","clear"]],["insert",["table","link","hr","image","video"]],["fontsize",["fontname","fontsize","color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["codeview",["codeview","fullscreen2"]]];$("textarea.app-html-editor:not(.added-ck)").each(function(){var g=$(this);var l=$(this).height();var k=$(this).css("min-height");try{if(!k){k=null}}catch(i){k=null}l+=100;var d=$(this).attr("maxlength");if(!d){d=-1}var h=$("<div>");var j=g.val().length;h.addClass("text-right");if(d==-1){h.html("Characters : "+j)}else{h.html("Characters : "+j+" of "+d).css("color","")}h.addClass("app-edittor-limit-text");var m=g.data("image-up-path");var f=g.data("no-image")?b:a;$(this).after(h);$(this).addClass(".added-ck").summernote({height:l,minHeight:k,toolbar:f,buttons:{fullscreen2:FullScreenButton,image:function(){if(m){var n=$.summernote.ui;var e=n.button({contents:'<i class="fa fa-image" />',tooltip:"Image manager",click:function(){$("#modal-image").remove();$.ajax({url:m,dataType:"html",beforeSend:function(){ShowWait(true,"Loading")},success:function(o){$("body").append('<div id="modal-image" class="modal">'+o+"</div>");$("#modal-image").modal("show");setCurrentSummernoteEdittor(g)},complete:function(){ShowWait(false,"Loading")}})}});return e.render()}else{}}},callbacks:{onImageUpload:function(e){uploadImage(e[0],m,$(this))},onKeyup:function(n){countCharacter(n,$(this),h,d,g)},onChange:function(n){countCharacter(n,$(this),h,d,g)},onResize:function(n){},onChange:function(o){var n=$(this).summernote("code");var p=new RegExp("<s*script.+?<s*/s*script.*?>","gi");if(n.match(p)){n=n.replace(p,"removed");$(this).summernote("code",n)}}}})})}catch(c){gcl(c.message)}}function uploadImage(d,b,a){if(!b||b==""){return}var c=new FormData();c.append("image",d);$.ajax({data:set_csrf_param(c),type:"POST",url:b,cache:false,contentType:false,processData:false,success:function(e){a.summernote("insertImage",e)}})}$(function(){set_summernote_init();AddOnLoadPopupMethod(set_summernote_init)});function countCharacter(g,b,f,a,d){var c=b.summernote("code").length;if(a!=-1){if(c<a){f.html("Characters : "+c+" of "+a).css("color","")}else{f.html("Characters : "+c+" of "+a).css("color","red")}}else{f.text("Characters : "+c)}d.trigger("input")};